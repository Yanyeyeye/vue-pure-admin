var le=Object.defineProperty,re=Object.defineProperties;var ie=Object.getOwnPropertyDescriptors;var Q=Object.getOwnPropertySymbols;var ue=Object.prototype.hasOwnProperty,ce=Object.prototype.propertyIsEnumerable;var X=(e,n,o)=>n in e?le(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,P=(e,n)=>{for(var o in n||(n={}))ue.call(n,o)&&X(e,o,n[o]);if(Q)for(var o of Q(n))ce.call(n,o)&&X(e,o,n[o]);return e},q=(e,n)=>re(e,ie(n));import{P as H,aQ as de,y as fe,cI as me,cJ as ge,cK as pe,cL as ve,ct as ye,cu as be,cM as Ce,cN as he,L as M,cE as Ee,ac as Be,t as v,cw as J,cO as Me,Q as w,cP as we,$ as ke,cQ as Se,aB as Te,cR as $e,cS as Ve,cy as Ae,cT as Ie,cU as ze,aG as Pe,cx as Le,cV as Re,I as k,aq as De,o as i,D as y,S as p,a1 as L,a2 as K,H as S,q as f,p as b,a0 as C,E as W,V as h,G as T,ci as R,a8 as D,ag as Oe,B as Z,J as Y,af as He,cz as Ne,cD as Ke,aC as O,cC as Ue,cW as je,az as ee,cX as x,aj as Ge}from"./index.03c8aace.js";const Fe=(e,n,o)=>{const t=s=>{o(s)&&s.stopImmediatePropagation()};let l;H(()=>e.value,s=>{s?l=de(document,n,t,!0):l==null||l()},{immediate:!0})},_e=fe({name:"ElMessageBox",directives:{TrapFocus:me},components:P({ElButton:ge,ElInput:pe,ElOverlay:ve,ElIcon:ye},be),inheritAttrs:!1,props:{buttonSize:{type:String,validator:Ce},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(e,{emit:n}){const{t:o}=he(),t=M(!1),{nextZIndex:l}=Ee(),s=Be({beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:l()}),u=v(()=>{const a=s.type;return a&&J[a]?`el-message-box-icon--${a}`:""}),c=Me(v(()=>e.buttonSize),{prop:!0,form:!0,formItem:!0}),N=v(()=>s.icon||J[s.type]||""),V=v(()=>!!s.message),A=M(),I=M(),r=M(),U=M(),se=v(()=>s.confirmButtonClass);H(()=>s.inputValue,async a=>{await w(),e.boxType==="prompt"&&a!==null&&G()},{immediate:!0}),H(()=>t.value,a=>{a&&((e.boxType==="alert"||e.boxType==="confirm")&&w().then(()=>{var d,g,_;(_=(g=(d=U.value)==null?void 0:d.$el)==null?void 0:g.focus)==null||_.call(g)}),s.zIndex=l()),e.boxType==="prompt"&&(a?w().then(()=>{r.value&&r.value.$el&&ae().focus()}):(s.editorErrorMessage="",s.validateError=!1))});const ne=v(()=>e.draggable);we(A,I,ne),ke(async()=>{await w(),e.closeOnHashChange&&Se(window,"hashchange",B)}),Te(()=>{e.closeOnHashChange&&$e(window,"hashchange",B)});function B(){!t.value||(t.value=!1,w(()=>{s.action&&n("action",s.action)}))}const j=()=>{e.closeOnClickModal&&z(s.distinguishCancelAndClose?"close":"cancel")},oe=Re(j),te=a=>{if(s.inputType!=="textarea")return a.preventDefault(),z("confirm")},z=a=>{var d;e.boxType==="prompt"&&a==="confirm"&&!G()||(s.action=a,s.beforeClose?(d=s.beforeClose)==null||d.call(s,a,s,B):B())},G=()=>{if(e.boxType==="prompt"){const a=s.inputPattern;if(a&&!a.test(s.inputValue||""))return s.editorErrorMessage=s.inputErrorMessage||o("el.messagebox.error"),s.validateError=!0,!1;const d=s.inputValidator;if(typeof d=="function"){const g=d(s.inputValue);if(g===!1)return s.editorErrorMessage=s.inputErrorMessage||o("el.messagebox.error"),s.validateError=!0,!1;if(typeof g=="string")return s.editorErrorMessage=g,s.validateError=!0,!1}}return s.editorErrorMessage="",s.validateError=!1,!0},ae=()=>{const a=r.value.$refs;return a.input||a.textarea},F=()=>{z("close")};return e.closeOnPressEscape?Ve({handleClose:F},t):Fe(t,"keydown",a=>a.code===Ae.esc),e.lockScroll&&Ie(t),ze(t),q(P({},Pe(s)),{overlayEvent:oe,visible:t,hasMessage:V,typeClass:u,btnSize:c,iconComponent:N,confirmButtonClasses:se,rootRef:A,headerRef:I,inputRef:r,confirmRef:U,doClose:B,handleClose:F,handleWrapperClick:j,handleInputEnter:te,handleAction:z,t:o})}}),Qe=["aria-label"],Xe={key:0,ref:"headerRef",class:"el-message-box__header"},qe={class:"el-message-box__title"},Je={class:"el-message-box__content"},We={class:"el-message-box__container"},Ze={key:1,class:"el-message-box__message"},Ye={key:0},xe=["innerHTML"],es={class:"el-message-box__input"},ss={class:"el-message-box__btns"};function ns(e,n,o,t,l,s){const u=k("el-icon"),c=k("close"),N=k("el-input"),V=k("el-button"),A=k("el-overlay"),I=De("trap-focus");return i(),y(He,{name:"fade-in-linear",onAfterLeave:n[11]||(n[11]=r=>e.$emit("vanish"))},{default:p(()=>[L(S(A,{"z-index":e.zIndex,"overlay-class":["is-message-box",e.modalClass],mask:e.modal},{default:p(()=>[f("div",{class:"el-overlay-message-box",onClick:n[8]||(n[8]=(...r)=>e.overlayEvent.onClick&&e.overlayEvent.onClick(...r)),onMousedown:n[9]||(n[9]=(...r)=>e.overlayEvent.onMousedown&&e.overlayEvent.onMousedown(...r)),onMouseup:n[10]||(n[10]=(...r)=>e.overlayEvent.onMouseup&&e.overlayEvent.onMouseup(...r))},[L((i(),b("div",{ref:"rootRef",role:"dialog","aria-label":e.title||"dialog","aria-modal":"true",class:C(["el-message-box",e.customClass,{"el-message-box--center":e.center,"is-draggable":e.draggable}]),style:Z(e.customStyle),onClick:n[7]||(n[7]=D(()=>{},["stop"]))},[e.title!==null&&e.title!==void 0?(i(),b("div",Xe,[f("div",qe,[e.iconComponent&&e.center?(i(),y(u,{key:0,class:C(["el-message-box__status",e.typeClass])},{default:p(()=>[(i(),y(W(e.iconComponent)))]),_:1},8,["class"])):h("v-if",!0),f("span",null,T(e.title),1)]),e.showClose?(i(),b("button",{key:0,type:"button",class:"el-message-box__headerbtn","aria-label":"Close",onClick:n[0]||(n[0]=r=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel")),onKeydown:n[1]||(n[1]=R(D(r=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"]))},[S(u,{class:"el-message-box__close"},{default:p(()=>[S(c)]),_:1})],32)):h("v-if",!0)],512)):h("v-if",!0),f("div",Je,[f("div",We,[e.iconComponent&&!e.center&&e.hasMessage?(i(),y(u,{key:0,class:C(["el-message-box__status",e.typeClass])},{default:p(()=>[(i(),y(W(e.iconComponent)))]),_:1},8,["class"])):h("v-if",!0),e.hasMessage?(i(),b("div",Ze,[Oe(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(i(),b("p",{key:1,innerHTML:e.message},null,8,xe)):(i(),b("p",Ye,T(e.message),1))])])):h("v-if",!0)]),L(f("div",es,[S(N,{ref:"inputRef",modelValue:e.inputValue,"onUpdate:modelValue":n[2]||(n[2]=r=>e.inputValue=r),type:e.inputType,placeholder:e.inputPlaceholder,class:C({invalid:e.validateError}),onKeydown:R(e.handleInputEnter,["enter"])},null,8,["modelValue","type","placeholder","class","onKeydown"]),f("div",{class:"el-message-box__errormsg",style:Z({visibility:e.editorErrorMessage?"visible":"hidden"})},T(e.editorErrorMessage),5)],512),[[K,e.showInput]])]),f("div",ss,[e.showCancelButton?(i(),y(V,{key:0,loading:e.cancelButtonLoading,class:C([e.cancelButtonClass]),round:e.roundButton,size:e.btnSize,onClick:n[3]||(n[3]=r=>e.handleAction("cancel")),onKeydown:n[4]||(n[4]=R(D(r=>e.handleAction("cancel"),["prevent"]),["enter"]))},{default:p(()=>[Y(T(e.cancelButtonText||e.t("el.messagebox.cancel")),1)]),_:1},8,["loading","class","round","size"])):h("v-if",!0),L(S(V,{ref:"confirmRef",type:"primary",loading:e.confirmButtonLoading,class:C([e.confirmButtonClasses]),round:e.roundButton,disabled:e.confirmButtonDisabled,size:e.btnSize,onClick:n[5]||(n[5]=r=>e.handleAction("confirm")),onKeydown:n[6]||(n[6]=R(D(r=>e.handleAction("confirm"),["prevent"]),["enter"]))},{default:p(()=>[Y(T(e.confirmButtonText||e.t("el.messagebox.confirm")),1)]),_:1},8,["loading","class","round","disabled","size"]),[[K,e.showConfirmButton]])])],14,Qe)),[[I]])],32)]),_:3},8,["z-index","overlay-class","mask"]),[[K,e.visible]])]),_:3})}var os=Le(_e,[["render",ns],["__file","/home/runner/work/element-plus/element-plus/packages/components/message-box/src/index.vue"]]);const $=new Map,ts=(e,n,o=null)=>{const t=Ge(os,e);return t.appContext=o,ee(t,n),document.body.appendChild(n.firstElementChild),t.component},as=()=>document.createElement("div"),ls=(e,n)=>{const o=as();e.onVanish=()=>{ee(null,o),$.delete(l)},e.onAction=s=>{const u=$.get(l);let c;e.showInput?c={value:l.inputValue,action:s}:c=s,e.callback?e.callback(c,t.proxy):s==="cancel"||s==="close"?e.distinguishCancelAndClose&&s!=="cancel"?u.reject("close"):u.reject("cancel"):u.resolve(c)};const t=ts(e,o,n),l=t.proxy;for(const s in e)x(e,s)&&!x(l.$props,s)&&(l[s]=e[s]);return H(()=>l.message,(s,u)=>{O(s)?t.slots.default=()=>[s]:O(u)&&!O(s)&&delete t.slots.default},{immediate:!0}),l.visible=!0,l};function E(e,n=null){if(!Ne)return Promise.reject();let o;return Ke(e)||O(e)?e={message:e}:o=e.callback,new Promise((t,l)=>{const s=ls(e,n!=null?n:E._context);$.set(s,{options:e,callback:o,resolve:t,reject:l})})}const rs=["alert","confirm","prompt"],is={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};rs.forEach(e=>{E[e]=us(e)});function us(e){return(n,o,t,l)=>{let s;return Ue(o)?(t=o,s=""):je(o)?s="":s=o,E(Object.assign(P({title:s,message:n,type:""},is[e]),t,{boxType:e}),l)}}E.close=()=>{$.forEach((e,n)=>{n.doClose()}),$.clear()};E._context=null;const m=E;m.install=e=>{m._context=e._context,e.config.globalProperties.$msgbox=m,e.config.globalProperties.$messageBox=m,e.config.globalProperties.$alert=m.alert,e.config.globalProperties.$confirm=m.confirm,e.config.globalProperties.$prompt=m.prompt};const fs=m;export{fs as E};
